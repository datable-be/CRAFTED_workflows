This Knime workflow is part of a suite of tools developed for the CRAFTED project (https://pro.europeana.eu/project/crafted).

This workflow will determine the colors of a foreground object in an image. The workflow builds upon the results from the workflow 'CRAFTED_get-data-MINT_public'

Note: this workflow guesses the foreground using the grabcut algorithm. For more precise foreground detection, pass the foreground detection results from the 'CRAFTED_objectdetector_GVision_base64' workflow and use the 'CRAFTED_get-color-from-region_OpenCV_with-object_public' workflow.

Workflow components:

1. read data about the image from a MongoDB and loads the image
2. determine the main colors
3. map the colors tot he colours of the European Fashion Thesaurus
4. write the image without background to a local disk
5. write the result in W3C annotation format to a file
6. write the result in W3C annotation format to the MongoDB

Configuration:
- set mongoDB connection to read image metadata [see workflow 'CRAFTED_get-data-MINT_public]
- set CP name and dataset ID
- set path to local disk for forground image files (in folder 'IMAGES_NO_BCKGRND')
- set mongoDB connection to write results
- set path to annotations folder
- Optional: set number of clusters in the 'get colors' node
- Optional: set threshhold for infrequemnt colours in 'filter colors <x%' node

Requirements:
- Knime (https://www.knime.com/)
- Python3 environment for Knime, as explained here: https://docs.knime.com/2018-12/python_installation_guide
- MongoDB Compass (see https://www.mongodb.com/products/compass)



